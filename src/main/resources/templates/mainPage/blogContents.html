<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>åšå®¢æ­£æ–‡</title>
    <script th:src="@{/js/jquery-3.5.1.js}"></script>
    <script th:src="@{/js/jquery-scrollto.js}"></script>
    <script th:src="@{/lib/prism/prism.js}"></script>
    <script th:src="@{/lib/tocbot/tocbot.min.js}"></script>
    <link rel="stylesheet" th:href="@{/lib/tocbot/tocbot.css}">
    <link rel="stylesheet" th:href="@{/semanticUi/semantic.min.css}">
    <link rel="stylesheet" th:href="@{/css/typo.css}">
    <link rel="stylesheet" th:href="@{/css/animate.css}">
    <link rel="stylesheet" th:href="@{/lib/prism/prism.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<!--å¤´éƒ¨å¯¼èˆªæ -->
<div th:insert="~{/commons/header::blogHeader('content')}"></div>

<!--ä¸­é—´å†…å®¹-->
<div class="m-padding-large animate__animated animate__fadeIn" style="width: 1400px;padding-left: 120px">
    <div class="ui grid">
        <!--æ­£æ–‡éƒ¨åˆ†-->
        <div class="twelve wide column">
            <!--åšæ–‡æ ‡é¢˜ä¿¡æ¯-->
            <div class="ui segment top attached m-div-shadow">
                <div class="ui grid">
                    <div class="fourteen wide column">
                        <div class="ui horizontal link list">
                            <div class="item">
                                <!--å› ä¸ºæ˜¯ä¸ªäººåšå®¢ï¼Œæ‰€ä»¥å¤´åƒç›´æ¥ä½¿ç”¨æœ¬åœ°çš„-->
                                <img th:src="@{/img/favicon.png}" alt="ä½œè€…å¤´åƒ" class="ui avatar image">
                                <div class="content"><h5><span th:text="${article.getAuthorName()}"></span></h5></div>
                            </div>
                            <div class="item">
                                <!--æ—¶é—´ä¾æ—§åªæ˜¾ç¤ºå¹´æœˆæ—¥-->
                                <i class="calendar icon"></i> [[${#strings.substring(article.getCreatedTime(), 0, 10)}]]
                            </div>
                            <div class="item">
                                <i class="eye icon"></i> [[${article.getReadCount()}]]
                            </div>

                            <div class="item">
                                <i class="comment outline icon"></i> [[${article.getCommentCount()}]]
                            </div>
                        </div>
                    </div>
                    <div class="two wide column right aligned ">
                        <div class="ui pink label" th:text="${article.getType()}"></div>
                    </div>
                </div>
            </div>

            <!--åšæ–‡é…å›¾ã€åšæ–‡æ­£æ–‡-->
            <div class="ui attached segment m-div-shadow blue m-div-radius">
                <div class="ui segment">
                    <img th:src="${article.getHeadImageAddress()}" alt="åšå®¢é…å›¾" style="max-width: 100%;width: auto">
                </div>
                <!--æ ‡é¢˜-->
                <h2 class="ui center aligned header m-padding-bottom-title">
                    <span th:text="${article.getTitle()}"></span>
                </h2>

                <!--åšå®¢æ­£æ–‡éƒ¨åˆ†-->
                <div class="js-toc-content" th:utext="${article.getContent()}"></div>
                <br>

                <!--æ ‡ç­¾ã€åˆ†ç±»ã€èµèµ-->
                <div class="ui grid m-padding-rl">
                    <!--æ ‡ç­¾å’Œåˆ†ç±»-->
                    <div class="eleven wide column">
                        <div class="ui blue right pointing label" th:text="${article.getTags()}"></div>
                        <div class="ui green label" th:text="${article.getSort()}"></div>
                    </div>
                </div>
            </div>

            <!--åšæ–‡ä¸‹æ–¹ä¿¡æ¯æ -->
            <div class="ui attached orange segment secondary m-div-shadow m-div-radius">
                <div class="ui middle aligned grid">
                    <div class="eleven wide column">
                        <ul class="list">
                            <li style="list-style-type: none !important;" class="m-li-margin-bottom">
                                <i class="user secret icon"></i>ä½œè€…ï¼šæ‚Ÿé“ä¹éœ„ <a th:href="@{/aboutMe}"
                                                                           target="_blank">ï¼ˆè”ç³»ä½œè€…ï¼‰</a>
                            </li>
                            <li style="list-style-type: none !important;" class="m-li-margin-bottom">
                                <i class="calendar times icon"></i>å‘å¸ƒæ—¶é—´ï¼š<span
                                    th:text="${#strings.substring(article.getCreatedTime(), 0, 10)}"></span>
                            </li>
                            <li style="list-style-type: none !important;">
                                <i class="copyright icon"></i>ç‰ˆæƒç”³æ˜ï¼šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„
                            </li>
                        </ul>
                    </div>
                    <div class="four wide column right aligned">
                        <!--è¯¥å›¾ç‰‡ä¸ä¿®æ”¹ï¼Œæ‰€ä»¥ç›´æ¥ç”¨æœ¬åœ°å›¾ç‰‡-->
                        <img th:src="@{/img/wechat.png}" alt="å¾®ä¿¡" class="ui right floated rounded bordered image"
                             style="width: 100px">
                    </div>
                </div>
            </div>

            <!--åšæ–‡è¯„è®ºåŒº-->
            <div class="ui bottom green attached secondary segment m-div-shadow m-div-radius m-padding-rlb">
                <div class="ui threaded comments">
                    <h3 class="ui dividing header m-opacity">æ¬¢è¿å‘å¸ƒè¯„è®º ~</h3>
                    <!--è¯„è®ºåˆ—è¡¨-->
                    <form class="ui form" th:action="@{/comment}" method="post">
                        <div class="ui threaded comments">
                            <div class="comment comment-tb-margin" th:each="comment:${commentList}">
                                <a class="avatar m-top-none"><img th:src="${comment.getAvatar()}"></a>
                                <div class="content">
                                    <a class="author m-opacity"><span th:text="${comment.getNickname()}"></span></a>
                                    <div class="metadata">
                                        <span class="date" th:text="${#dates.format(comment.getCreatedTime(), 'yyyy-MM-dd')}"></span>
                                    </div>
                                    <div class="actions">
                                        <a class="reply" th:data-commontid="${comment.getId()}"
                                           th:data-commontnickname="${comment.getNickname()}"
                                           onclick="replay(this)">å›å¤</a>
                                    </div>
                                    <div class="text"
                                         th:text="${parentMap.get(comment.getId()) == null} ? ${comment.getContent()} : '@' + ${parentMap.get(comment.getId()).getNickname()} + ' ï¼š' + ${comment.getContent()}"></div>
                                </div>
                            </div>
                        </div>

                        <!--è¯„è®ºæäº¤-->
                        <input type="hidden" name="blogId" th:value="${article.getId()}">
                        <input type="hidden" name="parentCommentId" value="-1">
                        <div class="field">
                            <textarea id="content" name="content" placeholder="è¯·è¾“å…¥è¯„è®ºä¿¡æ¯..." cols="30" rows="10"
                                      required></textarea>
                        </div>
                        <div class="fields">
                            <div class="field">
                                <div class="ui left icon input">
                                    <i class="user icon"></i><input type="text" id="nickname" name="nickname"
                                                                    placeholder="æ˜µç§°" style="width: 260px" required>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui left icon input">
                                    <i class="mail icon"></i><input type="text" id="email" name="email"
                                                                    placeholder="é‚®ç®±" style="width: 260px" required>
                                </div>
                            </div>
                            <div class="field">
                                <button class="ui blue submit button"><i class="location arrow icon"></i>æäº¤</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>

        <!--ä¾§è¾¹æ ç›®å½•éƒ¨åˆ†-->
        <div class="four wide column">
            <div class="ui segment blog-seg">
                <ol class="js-toc toc-size"></ol>
            </div>
        </div>
    </div>
</div>

<!--å³ä¸‹è§’æ‚¬æµ®å·¥å…·æ -->
<div class="ui vertical icon buttons animate__animated animate__fadeIn tools-fixed">
    <!--æ§åˆ¶è·³åˆ°é¡µé¢é¡¶éƒ¨å’Œåº•éƒ¨-->
    <a href="#top-nav" class="ui blue button">é¡¶éƒ¨ ğŸ‘†</a>
    <a href="#foot-nav" class="ui blue button">åº•éƒ¨ ğŸ‘‡</a>
</div>

<!--footerä¿¡æ¯æ -->
<div th:insert="~{/commons/footer::blogFooter}"></div>

<script>
    //åˆå§‹åŒ–tocbot
    tocbot.init({
        tocSelector: '.js-toc',
        contentSelector: '.js-toc-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        positionFixedSelector: ".blog-seg",
        //ç›®å½•æŠ˜å å±‚çº§
        collapseDepth: 3,
        //è®¾ç½®ä¸ºæ— åºåˆ—è¡¨
        orderedList: false,
        scrollEndCallback: function (e) {
            window.scrollTo(window.scrollX, window.scrollY);
        },
    });

    //å›å¤è¯„è®º
    function replay(obj) {
        var commentId = $(obj).data('commontid');
        var commentNickname = $(obj).data('commontnickname');
        $("[name='content']").attr("placeholder", "@" + commentNickname).focus();
        //ç‚¹å‡»å›å¤ä¹‹åï¼Œè¯¥è¯„è®ºçš„çˆ¶ id å°±æ˜¯å®ƒå›å¤çš„é‚£ä¸ª id
        $("[name='parentCommentId']").val(commentId);
        $(window).scrollTo($('#comm-form'), 500);
    }
</script>

</body>
</html>